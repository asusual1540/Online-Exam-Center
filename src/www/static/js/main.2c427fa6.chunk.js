(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t){},125:function(e,t,a){e.exports=a.p+"static/media/logo-oec.1152fc83.svg"},134:function(e,t,a){e.exports=a(264)},139:function(e,t,a){},149:function(e,t){},151:function(e,t){},189:function(e,t){},190:function(e,t){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},259:function(e,t){},260:function(e,t){},261:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(32),o=a.n(r),c=a(27),l=a(16),i=Object(l.a)(),u=(a(139),a(51)),d=a(3),m=a(4),h=a(6),p=a(5),f=a(7),E=a(2),b=a(125),v=a.n(b),g=a(11),y=function(){return s.a.createElement("div",{className:"main-nav"},s.a.createElement(g.a,{to:"/",style:{textDecoration:"none"}},s.a.createElement("div",{className:"logo-box"},s.a.createElement("img",{src:v.a,alt:"logo",className:"logo-icon"}),s.a.createElement("h2",{className:"logo-text"},"Online Exam Center"))))},x=a(13),w=a(24),_=a.n(w),S=function(e){var t=e.name,a=e.label,n=e.value,r=e.onChange,o=e.type,c=e.error;return s.a.createElement("div",null,s.a.createElement("label",{className:"checkbox"===o?"form-label-checkbox":"form-label",htmlFor:t},a),"checkbox"!==o&&s.a.createElement("br",null),s.a.createElement("input",{name:t,value:n,onChange:r,className:"checkbox"===o?"form-input-checkbox":"form-input",id:t,type:o}),c&&s.a.createElement("div",{className:"input-error"},c))},C="http://146.148.111.54:8000/";var N=function(e,t,a){if(t&&_.a.decode(t).exp<Date.now()/1e3)return localStorage.clear(),E.b.info("Token Expired. Please login again..."),void i.replace("/");fetch(C,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+t}}).then((function(e){if(200===e.status||201===e.status)return e.json()})).then((function(e){a(e)})).catch((function(e){return e}))},O=s.a.createContext({token:null,tokenExpiration:null,userID:null,accessType:null,username:null,login:function(e,t,a,n,s){},logout:function(){},exam_id:null,setExam:function(e){}});function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var D=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={data:{studentID:"",studentPassword:"",examCode:"",examPassword:""}},a.handleChange=function(e){var t=e.currentTarget,n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state.data);n[t.name]=t.value,a.setState({data:n})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.data,n=t.examCode,s=t.examPassword,r=t.studentID,o=t.studentPassword,c={query:'\n        query {\n          studentLogin (examCode: "'.concat(n,'", examPassword: "').concat(s,'", studentID: "').concat(r,'", studentPassword : "').concat(o,'") {\n            token\n          }\n        }\n      ')};N(c,"",(function(e){try{var t=e.data.studentLogin.token;if(t){var n=_.a.decode(t),s=n.studentID,r=n.name,o=n.exam_id,c=n.accessType,l=n.exp;localStorage.setItem("token",t),localStorage.setItem("userID",s),localStorage.setItem("username",r),localStorage.setItem("exam_id",o),localStorage.setItem("accessType",c),localStorage.setItem("tokenExpiration",l),a.context.setExam(o),a.context.login(t,s,r,c,l),a.props.history.push("/api/StudentExamRoom"),E.b.success("Successfully logged in")}}catch(i){a.props.history.push("/"),E.b.error("".concat(e.errors[0].message))}}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.data;return s.a.createElement("div",{className:"student-exam-form "},s.a.createElement("h2",null,"Enter Exam"),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},s.a.createElement(S,{name:"examCode",value:e.examCode,label:"Exam Code",onChange:this.handleChange,type:"text"}),s.a.createElement(S,{name:"examPassword",value:e.examPassword,label:"Exam Password",onChange:this.handleChange,type:"password"}),s.a.createElement(S,{name:"studentID",value:e.studentID,label:"Student ID",onChange:this.handleChange,type:"text"}),s.a.createElement(S,{name:"studentPassword",value:e.studentPassword,label:"Student Password",onChange:this.handleChange,type:"password"}),s.a.createElement("button",{type:"submit",className:"form-button"},"Enter")))}}]),t}(n.Component);D.contextType=O;var j=Object(c.g)(D),I=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"teacher-or-admin"},s.a.createElement("div",{className:"wrapper"},s.a.createElement(g.a,{to:"/api/adminLogin"},s.a.createElement("button",{className:"button-general"},"Login as Admin")),s.a.createElement(g.a,{to:"/api/teacherLogin"},s.a.createElement("button",{className:"button-general"},"Login as Teacher"))))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"all-container"},s.a.createElement(j,null),s.a.createElement(I,null))}}]),t}(n.Component),P=Object(c.g)(q);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={account:{username:"",password:""},isLogin:!0},a.handleChange=function(e){var t=e.currentTarget,n=M({},a.state.account);n[t.name]=t.value,a.setState({account:n})},a.handleClearState=function(e){e.preventDefault();var t=M({},a.state.account);t.username="",t.password="",a.setState({account:t})},a.handleSubmit=function(e){e.preventDefault();var t=M({},a.state.account),n=t.username,s=t.password,r={query:'\n        query {\n          adminLogin (name: "'.concat(n,'", password: "').concat(s,'") {\n            token\n          }\n        }\n      ')};N(r,"",(function(e){try{var t=e.data.adminLogin.token;if(t){localStorage.setItem("token",t);var n=_.a.decode(t),s=n.adminID,r=n.name,o=n.accessType,c=n.exp;localStorage.setItem("userID",s),localStorage.setItem("username",r),localStorage.setItem("accessType",o),localStorage.setItem("tokenExpiration",c),a.context.login(t,s,r,o,c),a.props.history.push("/api/admin/myTeachers")}}catch(l){E.b.error("Invalid Credentials")}}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.account;return s.a.createElement("div",{className:"login_form"},s.a.createElement("h2",null,"Admin's Login"),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-control"},s.a.createElement(S,{name:"username",value:e.username,label:"Username",onChange:this.handleChange,type:"text"}),s.a.createElement(S,{name:"password",value:e.password,label:"Password",onChange:this.handleChange,type:"password"}),s.a.createElement("div",{className:"form-button-group"},s.a.createElement("button",{type:"submit",className:"form-button"},"Login"),s.a.createElement("button",{className:"form-button",onClick:this.handleClearState},"Clear"),s.a.createElement(g.a,{to:"/"},s.a.createElement("button",{className:"form-button"},"Back")))))}}]),t}(n.Component);A.contextType=O;var U=A,R=a(76),F=a(72),B=a.n(F),L=new(a(133).a)("ws://146.148.111.54:8000/",{reconnect:!0,timeout:3e4,lazy:!0,connectionParams:{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}});var Q=function(e,t){var a=L.request({query:e}).subscribe({next:function(e){var n=e.data;n&&t(n,a)}})},Y=(a(250),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.questions||[];return s.a.createElement("div",{className:"qp-container"},s.a.createElement("div",{className:"qp-header"},s.a.createElement("div",{className:"qp-header-text"},"Question")),s.a.createElement("div",{className:"qp-body"},e.map((function(e,t){return s.a.createElement("div",{key:t,className:"qp-single"},s.a.createElement("div",{className:"qp-serial"},s.a.createElement("h3",null,e.id,".")),s.a.createElement("div",{className:"qp-data"},s.a.createElement("div",{className:"qp-data-title"},s.a.createElement("h3",null,e.text)),s.a.createElement("div",{className:"qp-data-box"},s.a.createElement("div",{className:"qp-data-options"},e.options.map((function(e,t){return s.a.createElement("div",{key:t,className:"qp-data-option"},s.a.createElement("div",{className:"qp-data-option-no"},s.a.createElement("h3",null,e.id,".")),s.a.createElement("div",{className:"qp-data-option-text"},s.a.createElement("h3",null,e.text)))}))),s.a.createElement("div",{className:"qp-data-image"},s.a.createElement("img",{src:e.image,alt:""})))),s.a.createElement("div",{className:"qp-mark"},s.a.createElement("h3",null,e.mark)))}))))}}]),t}(n.Component)),G=(a(251),function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"sm-checkbox-label"},e.title),s.a.createElement("label",{className:"sm-switch"},s.a.createElement("input",{type:"checkbox",onChange:e.onChange,checked:!!e.status}),s.a.createElement("span",{className:"sm-slider round"})))}),H=(a(252),function(){return s.a.createElement("div",{className:"backdrop"})});a(253);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={exam:{_id:"",title:"",code:"",totalMarks:0,examDate:"",totalTimeInMin:0,status:!1,courseTitle:"",courseCode:"",semester:"",year:0},students:[],loggedInStudents:[],restrictedStudents:[],temporaryRestrictedStudents:[],submittedStudents:[],liveStudents:[],teacher:{_id:"",name:"",deptCode:""},question:{},angryMode:!1,choice:1,student:{_id:"",name:"",studentID:"",permission:!0,submission:!1,activeStatus:!1,tempStatus:!1,permanentStatus:!1}},a.handleExit=function(){a.props.history.push("/api/teacher/myExam")},a.handleStopExam=function(){var e=a.context.userID,t=a.context.exam_id,n=a.context.token,s={query:'\n      mutation {\n          stopExam (examID: "'.concat(t,'", teacherID: "').concat(e,'")\n        }\n      ')};N(s,n,(function(e){e.data.stopExam&&E.b.success("All students were logged out of the exam"),a.props.history.push("/api/teacher/myExam"),localStorage.setItem("exam_id",""),a.context.setExam("")}))},a.handleTooglePermission=function(e,t){var n=localStorage.getItem("exam_id"),s=a.context.token,r=a.state.teacher,o={query:'\n        mutation{\n          restrictStudentByID(studentID : "'.concat(t._id,'", teacherID: "').concat(r._id,'", examID: "').concat(n,'") \n        }\n      ')},c={query:'\n        mutation{\n          permitStudentByID(studentID : "'.concat(t._id,'", teacherID: "').concat(r._id,'", examID: "').concat(n,'") \n        }\n      ')},l=a.state.students,i=l.find((function(e){return e._id===t._id}));a.setState({student:i});var u=a.state.temporaryRestrictedStudents,d=u.map((function(e){return e._id}));i.submission&&!0!==d.includes(t._id)?E.b.info("".concat(i.name," Already submitted")):e.target.checked?i.permanentStatus?E.b.info("".concat(i.name," was permanently restricted for this exam")):(i.permission=!0,i.submission=!1,i.tempStatus=!1,u.pop(i),a.setState({students:l,temporaryRestrictedStudents:u}),N(c,s,(function(e){e.data.permitStudentByID&&E.b.success("".concat(i.name," was permitted"))}))):i.activeStatus?a.setState({angryMode:!0}):(i.permission=!1,a.setState({students:l}),N(o,s,(function(e){e.data.restrictStudentByID&&E.b.success("".concat(i.name," was restricted"))})))},a.handleToogleSubmission=function(e,t){E.b.info("Submission is an automatic process")},a.handleClose=function(){a.setState({angryMode:!1,choice:1})},a.handleRadioChange=function(e){var t=e.currentTarget;a.setState({choice:Number(t.value)})},a.handleAnger=function(){var e=a.state.choice,t=a.state.student,n=a.state.students,s=localStorage.getItem("exam_id"),r=a.context.token,o=a.state.teacher,c=n.find((function(e){return e._id===t._id}));switch(e){case 1:var l={query:'\n        mutation{\n          temporaryRestrictStudentByID(studentID : "'.concat(t._id,'", teacherID: "').concat(o._id,'", examID: "').concat(s,'") \n        }\n      ')},i=a.state.temporaryRestrictedStudents;i.push(t),c.permission=!1,c.submission=!0,c.activeStatus=!1,c.tempStatus=!0,a.setState({students:n,temporaryRestrictedStudents:i,angryMode:!1}),N(l,r,(function(e){e.data.temporaryRestrictStudentByID&&E.b.success("".concat(t.name," was temporarily restricted and kicked out"))}));break;case 2:var u={query:'\n        mutation{\n          restrictAndSubmitStudentByID(studentID : "'.concat(t._id,'", teacherID: "').concat(o._id,'", examID: "').concat(s,'") \n        }\n      ')};c.permission=!1,c.submission=!0,c.activeStatus=!1,c.permanentStatus=!0,a.setState({students:n,angryMode:!1}),N(u,r,(function(e){e.data.restrictAndSubmitStudentByID&&E.b.success("".concat(c.name," was restricted and his answer was submitted"))}));break;case 3:var d={query:'\n        mutation{\n          permanentRestrictStudentByID(studentID : "'.concat(t._id,'", teacherID: "').concat(o._id,'", examID: "').concat(s,'") \n        }\n      ')};c.permission=!1,c.submission=!1,c.activeStatus=!1,c.permanentStatus=!0,a.setState({students:n,angryMode:!1}),N(d,r,(function(e){e.data.permanentRestrictStudentByID&&E.b.success("".concat(c.name," was restricted permanently and his answer was not submitted"))}));break;default:console.log("Default")}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("exam_id"),a=this.context.token,n={query:'\n      query {\n        get_exam_by_id(examID: "'.concat(t,'"){\n          title\n          code\n          password\n          totalMarks\n          examDate\n          totalTimeInMin\n          status\n          date\n          course {\n            title\n            code\n          }\n          year\n          semester\n          teacher{\n            _id\n            name\n            deptCode\n          }\n          students {\n            _id\n            name\n            studentID\n          }\n          loggedInStudents {\n            _id\n            name\n            studentID\n          }\n          restrictedStudents {\n            _id\n            name\n            studentID\n          }\n          temporaryRestrictedStudents {\n            _id\n            name\n            studentID\n          }\n          submittedStudents {\n            _id\n            name\n            studentID\n          }\n          question {\n            _id\n            questions {\n              id\n              text\n              mark\n              image\n              options {\n                id\n                text\n              }\n            }\n          }\n        }\n      }\n      ')};N(n,a,(function(t){t.data||E.b.error("Can not get data");var a,n=t.data.get_exam_by_id,s=n.loggedInStudents.map((function(e){return e._id})),r=n.restrictedStudents.map((function(e){return e._id})),o=n.temporaryRestrictedStudents.map((function(e){return e._id})),c=n.submittedStudents.map((function(e){return e._id}));a=n.students.map((function(e){return{_id:e._id,name:e.name,studentID:e.studentID,permission:!(r.includes(e._id)||c.includes(e._id)||o.includes(e._id)),submission:!!c.includes(e._id),activeStatus:!!s.includes(e._id),tempStatus:!!o.includes(e._id),permanentStatus:!!r.includes(e._id)}})),e.setState({exam:{_id:n._id,title:n.title,code:n.code,totalMarks:n.totalMarks,examDate:n.examDate,totalTimeInMin:n.totalTimeInMin,status:n.status,courseTitle:n.course.title,courseCode:n.course.code,semester:n.semester,year:n.year},students:a||[],loggedInStudents:n.loggedInStudents||[],restrictedStudents:n.restrictedStudents||[],temporaryRestrictedStudents:n.temporaryRestrictedStudents||[],submittedStudents:n.submittedStudents||[],teacher:n.teacher||{},question:n.question||{}})}));var s=this.context.exam_id,r='\n    subscription {\n      studentLoggedIn (exam_id : "'.concat(s,'"){\n        _id\n        name\n        studentID\n        status\n      }\n    }\n      '),o='\n    subscription {\n      studentLoggedOut (exam_id : "'.concat(s,'"){\n        _id\n        name\n        studentID\n        status\n      }\n    }\n      '),c='\n    subscription {\n      studentQuitWithoutSubmit (exam_id : "'.concat(s,'"){\n        _id\n        name\n        studentID\n        status\n      }\n    }\n      ');Q(r,(function(t,a){console.log(t.studentLoggedIn);for(var n=t.studentLoggedIn,s=e.state.students,r={},o=0;o<s.length;o++)s[o]._id===n._id&&(s[o].activeStatus=!0,r=J({},s[o]));E.b.info("".concat(r.name," just Logged in.")),e.setState({students:s})})),Q(o,(function(t,a){console.log(t.studentLoggedOut);for(var n=t.studentLoggedOut,s=e.state.students,r=0;r<s.length;r++)s[r]._id===n._id&&(s[r].activeStatus=!1,s[r].submission=!0,s[r].permission=!1);e.setState({students:s})})),Q(c,(function(t,a){for(var n=t.studentQuitWithoutSubmit,s=e.state.students,r={},o=0;o<s.length;o++)s[o]._id===n._id&&(s[o].activeStatus=!1,s[o].submission=!1,s[o].permission=!1,r=J({},s[o]));E.b.info("".concat(r.name," just Quit without submitting")),e.setState({students:s})}))}},{key:"render",value:function(){var e=this,t=this.state.exam,a=t.title,n=t.code,r=t.totalMarks,o=t.examDate,c=t.totalTimeInMin,l=t.courseTitle,i=t.courseCode,u=t.semester,d=t.year,m=this.state.students,h=this.state.teacher,p=o.split("T"),f=Object(R.a)(p,2),E=f[0],b=f[1],v=B()("".concat(E," ").concat(b),"YYYY-MM-DD HH:mm").format("dddd, MMMM Do YYYY, h:mm:ss a").split(","),g=Object(R.a)(v,3),y=g[0],x=g[1],w=g[2],_=B()().format("dddd, MMMM Do YYYY");return s.a.createElement("div",{className:"exam-room"},s.a.createElement("div",{className:"er-left"},s.a.createElement("div",{className:"er-students"},s.a.createElement("div",{className:"er-header"},s.a.createElement("div",{className:"er-header-text"},"Students")),s.a.createElement("div",{className:"er-columns"},s.a.createElement("span",{className:"er-column"},"StudentID"),s.a.createElement("span",{className:"er-column"},"Permission"),s.a.createElement("span",{className:"er-column"},"Submission"),s.a.createElement("span",{className:"er-column"},"Status")),m.map((function(t){return s.a.createElement("div",{key:t._id,className:"er-data-student"},s.a.createElement("span",null,"".concat(t.studentID.split("-")[1],"-").concat(t.studentID.split("-")[3])),s.a.createElement("span",null,s.a.createElement(G,{onChange:function(a){return e.handleTooglePermission(a,t)},status:t.permission})),s.a.createElement("span",null,s.a.createElement(G,{onChange:function(a){return e.handleToogleSubmission(a,t)},status:t.submission})),s.a.createElement("span",{className:"er-status \n                ".concat(t.activeStatus?"er-green":""," \n                ").concat(t.tempStatus?"er-yellow":"","\n                ").concat(t.permanentStatus?"er-red":"","\n                ")}))})))),s.a.createElement("div",{className:"er-middle"},s.a.createElement(Y,{questions:this.state.question.questions})),s.a.createElement("div",{className:"er-right"},s.a.createElement("div",{className:"er-exam-details"},s.a.createElement("div",{className:"er-header"},s.a.createElement("div",{className:"er-header-text"},"Exam Details")),s.a.createElement("div",{className:"er-data"},"Title: ",a),s.a.createElement("div",{className:"er-data"},"Exam Code: ",n),s.a.createElement("div",{className:"er-data"},"Full Marks: ",r),s.a.createElement("div",{className:"er-data"},"Duration: ",c," min"),s.a.createElement("div",{className:"er-data"},"Course Title: ",l),s.a.createElement("div",{className:"er-data"},"Course Code: ",i),s.a.createElement("div",{className:"er-data"},"Semester: ",u),s.a.createElement("div",{className:"er-data"},"Year: ",d),s.a.createElement("div",{className:"er-data"},"Exam Date: ",y," ",x),s.a.createElement("div",{className:"er-data"},"Today: ",_),s.a.createElement("div",{className:"er-data"},"Time: ",w)),s.a.createElement("div",{className:"er-my-profile"},s.a.createElement("div",{className:"er-countdown"},s.a.createElement("div",{className:"er-teacher"},s.a.createElement("div",{className:"er-header"},s.a.createElement("div",{className:"er-header-text"},"Teacher")),s.a.createElement("div",{className:"er-data"},"Name: ",h.name),s.a.createElement("div",{className:"er-data"},"Department: ",h.deptCode))),s.a.createElement("div",{className:"er-controls"},s.a.createElement("button",{onClick:this.handleStopExam,className:"er-button"},"End Exam"),s.a.createElement("button",{onClick:this.handleExit,className:"er-button"},"Go Back")))),this.state.angryMode&&s.a.createElement("div",{className:"er-confirmation"},s.a.createElement("span",{className:"close-icon",onClick:this.handleClose},"\u2716"),s.a.createElement("div",{className:"er-confirmation-container"},s.a.createElement("div",{className:"er-confirmation-header"},"Are you sure?"),s.a.createElement("div",{className:"er-confirmation-body"},s.a.createElement("div",{className:"er-confirmation-info"},"".concat(this.state.student.name," is active and you want to restrict him/her. Choose an option to proceed.")),s.a.createElement("div",{className:"er-confirmation-choices"},s.a.createElement("input",{checked:1===this.state.choice,type:"radio",id:1,name:"er-confirmation-choices",value:1,onChange:function(t){return e.handleRadioChange(t)}}),s.a.createElement("label",{htmlFor:1,className:"er-confirmation-ans"},s.a.createElement("p",{className:"ecc-text"},"Temporarily restrict him/her. You can permit him/her later so he/she can resume answering then.")),s.a.createElement("input",{checked:2===this.state.choice,type:"radio",id:2,name:"er-confirmation-choices",value:2,onChange:function(t){return e.handleRadioChange(t)}}),s.a.createElement("label",{htmlFor:2,className:"er-confirmation-ans"},s.a.createElement("p",{className:"ecc-text"},"Grant his/her answer upto which he/she answered and kick him/her out.")),s.a.createElement("input",{checked:3===this.state.choice,type:"radio",id:3,name:"er-confirmation-choices",value:3,onChange:function(t){return e.handleRadioChange(t)}}),s.a.createElement("label",{htmlFor:3,className:"er-confirmation-ans"},s.a.createElement("p",{className:"ecc-text"},"Permanently discard his/her answer and kick him/her out.")))),s.a.createElement("div",{className:"er-confirmation-footer"},s.a.createElement("button",{onClick:this.handleAnger,className:"er-button"},"Okay")))),this.state.angryMode&&s.a.createElement(H,null))}}]),t}(n.Component);z.contextType=O;var W=z,V=a(14),X=(a(254),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"format",value:function(e){var t=e%60,a=Math.floor(e/60);return(a=1===a.toString().length?"0"+a:a)+":"+(t=1===t.toString().length?"0"+t:t)}},{key:"render",value:function(){var e=this.props.time;return s.a.createElement("div",{className:"displayedTime"},s.a.createElement("h1",null,this.format(e)))}}]),t}(n.Component)),Z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={count:1800,running:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.handleStart()}},{key:"componentDidUpdate",value:function(e,t){if(this.state.running!==t.running)switch(this.state.running){case!0:this.handleStart();break;default:return null}}},{key:"componentWillUnmount",value:function(){this.handleStop()}},{key:"handleStart",value:function(){var e=this;this.timer=setInterval((function(){var t=e.state.count-1;e.setState({count:t>=0?t:0})}),1e3)}},{key:"handleStop",value:function(){this.timer&&(clearInterval(this.timer),this.setState({running:!1}))}},{key:"handleReset",value:function(){this.setState({count:0})}},{key:"handleCountdown",value:function(e){this.setState({count:e,running:!0})}},{key:"render",value:function(){var e=this.state.count;return s.a.createElement("div",{className:"container"},s.a.createElement(X,{time:e}))}}]),t}(n.Component),$=(a(255),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={duration:0,exam:{_id:"",title:"",code:"",totalMarks:0,examDate:"",totalTimeInMin:0,status:!1,courseTitle:"",courseCode:"",semester:"",year:0},questions:[{id:1,text:"",mark:1,image:"",option_one:"",option_two:"",option_three:"",option_four:"",q_answer:1}],answer:{_id:"",answers:[{questionIndex:1,studentAnswer:1}]}},a.handleLogout=function(){var e=a.context.token,t=a.context.userID,n=a.context.exam_id;a.props.history.push("/"),localStorage.clear();var s={query:'\n          query {\n            logoutStudent(studentID: "'.concat(t,'", examID: "').concat(n,'")\n          }\n          ')};N(s,e,(function(e){e.data.logoutStudent?(localStorage.setItem("exam_id",""),a.context.setExam(""),E.b.success("Submitted and logged you out")):E.b.error("Can not log you out")}))},a.handleExit=function(){var e=a.context.token,t=a.context.userID,n=a.context.exam_id;a.props.history.push("/"),localStorage.clear();var s={query:'\n          query {\n            quitExam(studentID: "'.concat(t,'", examID: "').concat(n,'")\n          }\n          ')};N(s,e,(function(e){e.data.quitExam?(localStorage.setItem("exam_id",""),a.context.setExam(""),E.b.success("Logged you out")):E.b.error("Can not log you out")}))},a.handleRadioChange=function(e,t){var n=e.currentTarget,s=Object(V.a)(a.state.questions),r=a.context.userID,o=a.context.exam_id,c=a.context.token,l=t,i=Number(n.value);s.map((function(e,t){return t===l?e.q_answer=i:null})),a.setState({questions:s});var u={query:'\n            mutation {\n                writeAnswer(\n                studentID: "'.concat(r,'", \n                examID: "').concat(o,'", \n                question_index: ').concat(l,", \n                question_answer: ").concat(i,"\n                ) \n            }\n            ")};N(u,c,(function(e){console.log(e)}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("exam_id"),a=this.context.token,n=this.context.userID,s={query:'\n            mutation {\n                getAnswer (studentID : "'.concat(n,'", examID: "').concat(t,'"){\n                  _id\n                  answers {\n                    questionIndex\n                    studentAnswer\n                  }\n                }\n              }\n            ')},r='\n        subscription {\n            permanentStudentRestrict (exam_id : "'.concat(t,'", studentID: "').concat(n,'"){\n            _id\n            name\n            studentID\n            status\n            }\n        }\n            '),o='\n        subscription {\n            temporaryStudentRestrict (exam_id : "'.concat(t,'", studentID: "').concat(n,'"){\n            _id\n            name\n            studentID\n            status\n            }\n        }\n            '),c='\n        subscription {\n            onExamStop (exam_id : "'.concat(t,'")\n        }\n            ');Q(c,(function(t,a){t.onExamStop&&(e.handleLogout(),a.unsubscribe())})),Q(r,(function(t,a){console.log(t.permanentStudentRestrict),t.permanentStudentRestrict._id===n&&(e.handleExit(),a.unsubscribe())})),Q(o,(function(t,a){console.log(t.temporaryStudentRestrict),t.temporaryStudentRestrict._id===n&&(e.handleLogout(),a.unsubscribe())}));var l={query:'\n      query {\n        get_exam_by_id(examID: "'.concat(t,'"){\n          title\n          code\n          password\n          totalMarks\n          examDate\n          totalTimeInMin\n          status\n          date\n          course {\n            title\n            code\n          }\n          year\n          semester\n          question {\n            _id\n            questions {\n              id\n              text\n              mark\n              image\n              options {\n                id\n                text\n              }\n            }\n          }\n        }\n      }\n      ')};N(s,a,(function(t){var n=t.data.getAnswer;e.setState({answer:n}),N(l,a,(function(t){t.data||E.b.error("Can not get data");var a=t.data.get_exam_by_id,s=t.data.get_exam_by_id.question.questions,r=[];console.log(r),s.map((function(e,t){return console.log(e),n.answers.map((function(a,n){return console.log(a),t===n?(console.log("pushed"),r.push({id:e.id,text:e.text,mark:e.mark,image:e.image,option_one:e.options[0].text,option_two:e.options[1].text,option_three:e.options[2].text,option_four:e.options[3].text,q_answer:a.studentAnswer})):""}))})),console.log(r),e.setState({exam:{_id:a._id,title:a.title,code:a.code,totalMarks:a.totalMarks,examDate:a.examDate,totalTimeInMin:a.totalTimeInMin,status:a.status,courseTitle:a.course.title,courseCode:a.course.code,semester:a.semester,year:a.year},questions:r})}))}))}},{key:"render",value:function(){var e=this,t=this.state.questions||[],a=Number(this.state.exam.totalTimeInMin);return s.a.createElement("div",{className:"student-exam-room"},s.a.createElement("div",{className:"ser-container"},s.a.createElement("div",{className:"ser-header"},s.a.createElement("div",{className:"ser-controls"},s.a.createElement("button",{onClick:this.handleLogout,className:"ser-button"},"Submit & Exit"),s.a.createElement("button",{onClick:this.handleExit,className:"ser-button"},"Exit")),s.a.createElement("div",{className:"ser-header-text"},"Question"),s.a.createElement(Z,{duration:a})),s.a.createElement("div",{className:"ser-body"},t.map((function(t,a){return s.a.createElement("div",{key:a,className:"ser-single"},s.a.createElement("div",{className:"ser-serial"},s.a.createElement("h3",null,t.id,".")),s.a.createElement("div",{className:"ser-data"},s.a.createElement("div",{className:"ser-data-title"},s.a.createElement("h3",null,t.text)),s.a.createElement("div",{className:"ser-data-contain"},s.a.createElement("div",{className:"ser-data-options"},s.a.createElement("div",{className:"ser-data-option"},s.a.createElement("input",{checked:1===t.q_answer,type:"radio",id:"q_ans_".concat(a+1,"_1"),name:"q_answer_".concat(a+1),value:1,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_1"),className:"ans"},s.a.createElement("p",{className:"ser-opt-text"},t.option_one))),s.a.createElement("div",{className:"ser-data-option"},s.a.createElement("input",{checked:2===t.q_answer,type:"radio",id:"q_ans_".concat(a+1,"_2"),name:"q_answer_".concat(a+1),value:2,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_2"),className:"ans"},s.a.createElement("p",{className:"ser-opt-text"},t.option_two))),s.a.createElement("div",{className:"ser-data-option"},s.a.createElement("input",{checked:3===t.q_answer,type:"radio",id:"q_ans_".concat(a+1,"_3"),name:"q_answer_".concat(a+1),value:3,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_3"),className:"ans"},s.a.createElement("p",{className:"ser-opt-text"},t.option_three))),s.a.createElement("div",{className:"ser-data-option"},s.a.createElement("input",{checked:4===t.q_answer,type:"radio",id:"q_ans_".concat(a+1,"_4"),name:"q_answer_".concat(a+1),value:4,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_4"),className:"ans"},s.a.createElement("p",{className:"ser-opt-text"},t.option_four)))),s.a.createElement("div",{className:"ser-data-image"},s.a.createElement("img",{src:t.image,alt:""})))),s.a.createElement("div",{className:"ser-mark"},s.a.createElement("h3",null,t.mark)))})))))}}]),t}(n.Component));$.contextType=O;var ee=$,te=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(O.Consumer,null,(function(e){return s.a.createElement("div",{className:"side-nav"},s.a.createElement("div",{className:"nav-container"},s.a.createElement("h2",{className:"title-teacher"},e.username),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(g.b,{exact:!0,to:"/api/teacher/myExam",activeClassName:"nav-active",className:"nav-link"},"Add Exam")),s.a.createElement("li",null,s.a.createElement(g.b,{exact:!0,to:"/api/teacher/change_password",activeClassName:"nav-active",className:"nav-link"},"Change Password")),s.a.createElement("li",null,s.a.createElement(g.b,{className:"nav-link",to:"/",onClick:e.logout},"Log Out")))))}))}}]),t}(n.Component),ae=(a(256),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={selected:a.props.selected||0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selected!==e.selected&&this.setState({selected:this.props.selected})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"tab_header"},s.a.createElement("ul",{className:"inline"},this.props.children.map((function(t,a){var n=a===e.state.selected?"selected":"";return s.a.createElement("li",{className:n,key:a,onClick:function(){return e.props.handleTabInputChange(a)}},t.props.title)}))),s.a.createElement("div",{className:"tab"},this.props.children[this.state.selected]))}}]),t}(n.Component)),ne=function(e){return s.a.createElement("div",null,e.children)},se=(a(257),function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"checkbox-label"},e.title),s.a.createElement("label",{className:"switch"},s.a.createElement("input",{type:"checkbox",onChange:e.onChange,checked:!!e.status}),s.a.createElement("span",{className:"slider round"})))}),re=function(e){var t=e.name,a=e.label,n=e.options,r=e.onChange,o=e.value;return s.a.createElement("div",{className:"form-group-select"},s.a.createElement("label",{className:"form-label",htmlFor:t},a),s.a.createElement("select",{name:t,id:t,value:o,onChange:r,className:"select-control"},n.map((function(e){return s.a.createElement("option",{key:e._id,value:e.name},e.name)}))))},oe=a(47),ce=a.n(oe),le=a(48),ie=a.n(le);function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={errors:{},addMode:!1,editMode:!1,options_semester:[{_id:1,name:"SPRING"},{_id:2,name:"SUMMER"},{_id:3,name:"WINTER"},{_id:4,name:"FALL"}],options_year:[{_id:1,name:"2019"},{_id:2,name:"2020"},{_id:3,name:"2021"}]},a.handleChange=function(e){var t=e.currentTarget,n=de({},a.props.exam);n[t.name]=t.value,a.props.onInputChange(n)},a.handleSubmit=function(e){e.preventDefault(),a.props.handleAddExam(),a.handleClose()},a.toogleCheckBox=function(e){var t=de({},a.props.exam);t.status=e.target.checked,a.props.onInputChange(t)},a.handleAdd=function(){a.props.clearState(),a.setState({addMode:!0})},a.handleClose=function(){a.setState({addMode:!1,editMode:!1}),a.props.clearState()},a.raiseHandleEdit=function(e){a.setState({editMode:!0}),a.props.handleExamEdit(e)},a.raiseClearState=function(e){a.setState({editMode:!1}),a.props.clearState(e)},a.raiseHandleUpdate=function(e){a.setState({editMode:!1}),a.props.handleUpdate(e)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.addMode,n=t.editMode,r=this.props.exam,o=r.title,c=r.code,l=r.status,i=r.password,u=r.prevPassword,d=r.newPassword,m=r.totalMarks,h=r.examDate,p=r.totalTimeInMin,f=r.courseTitle,E=r.courseCode,b=r.semester,v=r.year;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"student_controls"},s.a.createElement("span",{className:"exam-title"},"My Exams"),s.a.createElement("div",{className:"exam-button-container"},s.a.createElement("button",{onClick:this.handleAdd,className:"button-green"},"Add Exam"),s.a.createElement("div",{className:"select-exam-group"},s.a.createElement(re,{name:"semester",label:"",onChange:this.props.handleSemesterChange,options:this.state.options_semester,value:this.props.semester}),s.a.createElement(re,{name:"year",label:"",onChange:this.props.handleYearChange,options:this.state.options_year,value:this.props.year})))),s.a.createElement("div",{className:"my_teachers_table"},s.a.createElement("table",{id:"table-for-exam"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"CourseTitle"),s.a.createElement("th",null,"Password"),s.a.createElement("th",null,"Exam Status"),s.a.createElement("th",null),s.a.createElement("th",null),s.a.createElement("th",null),s.a.createElement("th",null),s.a.createElement("th",null))),s.a.createElement("tbody",null,this.props.exams.map((function(t){return s.a.createElement("tr",{key:t._id},s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.course.title),s.a.createElement("td",null,t.password),s.a.createElement("td",null,s.a.createElement(se,{onChange:function(a){return e.props.handleToogleCheckBoxExam(a,t)},status:t.status})),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return e.props.handleStudent(t)},className:"button-green"},"Students")),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return e.props.handleQuestion(t)},className:"button-green"},"Question")),s.a.createElement("td",null,s.a.createElement("button",{onClick:e.context.exam_id===t._id&&t.status?function(){return e.props.enterOngoingExam(t)}:function(){return e.props.handleStartExam(t)},className:e.context.exam_id===t._id&&t.status?"button-blue":"button-green"},e.context.exam_id===t._id&&t.status?"Enter":"Start")),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return e.props.handleResult(t)},className:"button-green"},"Result")),s.a.createElement("td",null,s.a.createElement("div",{className:"table-controls"},s.a.createElement("button",{onClick:function(){return e.raiseHandleEdit(t)}},s.a.createElement("img",{src:ie.a,alt:"Edit",className:"table-icon-edit"})),s.a.createElement("button",{onClick:function(){return e.props.handleDeleteExam(t)}},s.a.createElement("img",{src:ce.a,alt:"Delete",className:"table-icon-delete"})))))}))))),s.a.createElement("div",{className:"general-details"},(a||n)&&s.a.createElement("div",{className:"add_exam_form"},s.a.createElement("span",{className:"close-icon",onClick:this.handleClose},"\u2716"),s.a.createElement("h2",null,n?"Update Exam":"Add Exam"),s.a.createElement("form",{className:"form-control-exam",onSubmit:n?this.raiseHandleUpdate:this.handleSubmit},s.a.createElement("div",{className:"general-details-container"},s.a.createElement("div",{className:"input-groups-exam"},s.a.createElement(S,{name:"title",value:o,label:"Exam Title",onChange:this.handleChange,type:"text",error:this.state.errors.title}),s.a.createElement(S,{name:"code",value:c,label:"Exam Code",onChange:this.handleChange,type:"text",error:this.state.errors.code}),s.a.createElement(S,{name:"courseCode",value:E,label:"Course Code",onChange:this.handleChange,type:"text",error:this.state.errors.courseCode}),s.a.createElement(S,{name:"courseTitle",value:f,label:"Course Title",onChange:this.handleChange,type:"text",error:this.state.errors.courseTitle}),s.a.createElement(se,{onChange:function(t){return e.toogleCheckBox(t)},status:l,title:"Status"})),s.a.createElement("div",{className:"select-groups-exam"},s.a.createElement("div",{className:"select-exam-group-editMode"},s.a.createElement(re,{name:"semester",label:"Semester",onChange:this.handleChange,options:this.state.options_semester,value:b}),s.a.createElement(re,{name:"year",label:"Year",onChange:this.handleChange,options:this.state.options_year,value:v})),s.a.createElement(S,{name:"totalMarks",value:m,label:"Total Marks",onChange:this.handleChange,type:"number"}),s.a.createElement(S,{name:"totalTimeInMin",value:p,label:"Duration (min)",onChange:this.handleChange,type:"number"}),n?s.a.createElement(s.a.Fragment,null,s.a.createElement(S,{name:"prevPassword",value:u,label:"New Password",onChange:this.handleChange,type:"password",error:this.state.errors.password}),s.a.createElement(S,{name:"newPassword",value:d,label:"Confirm New Password",onChange:this.handleChange,type:"password",error:this.state.errors.password})):s.a.createElement(S,{name:"password",value:i,label:"Password",onChange:this.handleChange,type:"password",error:this.state.errors.password}),s.a.createElement(S,{name:"examDate",value:h,label:"Exam Date",onChange:this.handleChange,type:"datetime-local",error:this.state.errors.examDate}))),s.a.createElement("div",{className:"button-group-exam"},s.a.createElement("button",{type:"submit",className:"form-button"},n?"Update":"Save"),a&&s.a.createElement("button",{onClick:function(t){return e.raiseClearState(t)},className:"form-button"},"Clear"))))),(a||n)&&s.a.createElement(H,null))}}]),t}(n.Component);me.contextType=O;var he=me,pe="http://146.148.111.54:8000/";var fe=function(e,t,a,n,s,r){if(s&&_.a.decode(s).exp<Date.now()/1e3)return localStorage.clear(),E.b.info("Token Expired. Please login again..."),void i.replace("/");fetch("".concat(pe,"/api/upload?e_id=").concat(e,"&q_id=").concat(t,"&q_no=").concat(a),{method:"POST",body:n,headers:{Authorization:"Bearer "+s}}).then((function(e){e.json().then((function(e){r(e)}))}))},Ee=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={authenticated:!!a.context.token,question_id:"",questions:[{id:1,text:"",mark:1,image:"",option_one:"",option_two:"",option_three:"",option_four:"",q_answer:1}],updateMode:!1,selectedFile:null},a.handleChange=function(e,t){var n=e.currentTarget,s=Object(V.a)(a.state.questions);s.map((function(e,a){return a===t?"number"===n.type?e[n.name]=Number(n.value):e[n.name]=n.value:null})),a.setState({questions:s})},a.handleRadioChange=function(e,t){var n=e.currentTarget;console.log(t);var s=Object(V.a)(a.state.questions);s.map((function(e,a){return a===t?e.q_answer=Number(n.value):null})),a.setState({questions:s})},a.handleQuestionAdd=function(e){e.preventDefault();var t=Object(V.a)(a.state.questions),n={id:t.length+1,text:"",mark:1,option_one:"",option_two:"",option_three:"",option_four:"",q_answer:1};t.push(n),a.setState({questions:t})},a.handleQuestionDelete=function(e,t){e.preventDefault();var n=Object(V.a)(a.state.questions);n.splice(t,1),a.setState({questions:n})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.exam._id,n=a.context.token,s=Object(V.a)(a.state.questions),r=[];s.map((function(e){var t=!1,a=!1,n=!1,s=!1;return 1===e.q_answer&&(t=!0),2===e.q_answer&&(a=!0),3===e.q_answer&&(n=!0),4===e.q_answer&&(s=!0),r.push("{\n                id: ".concat(e.id,",\n                mark: ").concat(e.mark,',\n                text: "').concat(e.text,'",\n                options: [\n                    {\n                        text: "').concat(e.option_one,'",\n                        answer: ').concat(t,',\n                        id: 1\n                    },\n                    {\n                        text: "').concat(e.option_two,'",\n                        answer: ').concat(a,',\n                        id: 2\n                    },\n                    {\n                        text: "').concat(e.option_three,'",\n                        answer: ').concat(n,',\n                        id: 3\n                    },\n                    {\n                        text: "').concat(e.option_four,'",\n                        answer: ').concat(s,",\n                        id: 4\n                    }\n                ]\n            }"))}));for(var o={query:'\n            mutation {\n                addQuestion (questionInput : {\n                    exam : "'.concat(t,'",\n                    questions : [').concat(r,"]\n                    }) {\n                        _id\n                        questions {\n                            id\n                            mark\n                            text\n                            options {\n                                id\n                                text\n                                answer\n                            }\n                        }\n                    }\n                }\n            ")},c=0,l=0;l<s.length;l++)c+=Number(s[l].mark);c!==Number(a.props.exam.totalMarks)&&0!==c?E.b.error("Summation of marks is not equal to full marks"):N(o,n,(function(e){e.data.addQuestion&&(a.state.updateMode?E.b.success("Successfully Updated Question"):E.b.success("Successfully Added a new Question"))}))},a.handleImageUpload=function(e){console.log(e.target.files[0]),a.setState({selectedFile:e.target.files[0]})},a.onClickHandler=function(e){var t=a.context.token,n=a.props.exam._id,s=a.state.question_id,r=new FormData;r.append("file",a.state.selectedFile),a.state.selectedFile?s?fe(n,s,e,r,t,(function(t){if(console.log(t),t.error)E.b.error("".concat(t.error));else for(var n=a.state.questions,s=t.question.questions,r=0;r<s.length;r++)if(r===e){console.log(s[r]);for(var o=0;o<n.length;o++)o===e&&(n[o].image=s[e].image);a.setState({questions:n})}})):E.b.error("You must submit the question first"):E.b.error("You must choose a file first")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context.token,a={query:'\n            query {\n                get_question_by_exam (examID : "'.concat(this.props.exam._id,'") {\n                _id\n                questions {\n                    id\n                    text\n                    mark\n                    image\n                    options {\n                      id\n                      text\n                      answer\n                    }\n                }\n                date\n                }\n            }\n        ')};N(a,t,(function(t){if(t.data.get_question_by_exam){var a=t.data.get_question_by_exam.questions;console.log(a);var n=t.data.get_question_by_exam._id;E.b.success("You have ".concat(a.length," existing question"));var s=[],r=1;a.map((function(e){return 0!==e.options.length&&e.options.map((function(e,t){return!0===e.answer&&(r=t+1),r})),console.log(s),s.push({id:e.id,text:e.text,mark:e.mark,image:e.image,option_one:e.options[0].text||"",option_two:e.options[1].text||"",option_three:e.options[2].text||"",option_four:e.options[3].text||"",q_answer:r})})),console.log(s),e.setState({question_id:n,questions:s,updateMode:!0})}else E.b.success("You have no existing question")}))}},{key:"handleKeyDown",value:function(e){e.target.style.height="inherit",e.target.style.height="".concat(e.target.scrollHeight,"px")}},{key:"render",value:function(){var e=this,t=this.state.questions,a=this.props.exam,n=a.course.code,r=a.title,o=a.year,c=a.totalMarks,l=a.totalTimeInMin;return s.a.createElement("div",{className:"question_container"},s.a.createElement("div",{className:"question_header"},s.a.createElement("div",{className:"university"},"State University of Bangladesh"),s.a.createElement("div",{className:"q_title"},n," ",r," MCQ Exam -",o),s.a.createElement("div",{className:"q_detail"},s.a.createElement("div",{className:"q_time"},"Duration : ",l," mins"),s.a.createElement("div",{className:"q_full_mark"},"Full Marks : ",c))),s.a.createElement("div",{className:"question_body"},t.map((function(t,a){return s.a.createElement("div",{key:a,className:"q_single"},s.a.createElement("div",{className:"q_index"},s.a.createElement("div",{className:"q_index_no"},a+1),s.a.createElement("button",{onClick:function(t){return e.handleQuestionDelete(t,a)},className:"q_delete"},"Delete")),s.a.createElement("div",{className:"q_container"},s.a.createElement("div",{className:"q"},s.a.createElement("textarea",{value:t.text,name:"text",rows:1,className:"q_question",id:"q_q",type:"text",onKeyDown:e.handleKeyDown,placeholder:"Type your question ".concat(a+1," here."),onChange:function(t){return e.handleChange(t,a)},spellCheck:"false"})),s.a.createElement("div",{className:"q_image_all"},s.a.createElement("div",{className:"q_image_input"},s.a.createElement("input",{type:"file",name:"file",onChange:e.handleImageUpload}),s.a.createElement("button",{type:"button",className:"button-upload",onClick:function(){return e.onClickHandler(a)}},"Upload")),s.a.createElement("div",{className:"q_k"},s.a.createElement("img",{src:t.image,alt:""}))),s.a.createElement("div",{className:"q_data"},s.a.createElement("div",{className:"q_answer"},s.a.createElement("div",{className:"q_single_answer_1"},s.a.createElement("div",{className:"q_single_answer"},s.a.createElement("input",{checked:1===t.q_answer,type:"radio",id:"q_ans_".concat(a+1,"_1"),name:"q_answer_".concat(a+1),value:1,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_1"),className:"ans"},s.a.createElement("textarea",{rows:1,name:"option_one",value:t.option_one,className:"q_ans_inp",type:"text",placeholder:"Type question ".concat(a+1," option 1."),onKeyDown:e.handleKeyDown,spellCheck:"false",onChange:function(t){return e.handleChange(t,a)}}))),s.a.createElement("div",{className:"q_single_answer"},s.a.createElement("input",{checked:2===t.q_answer,type:"radio",id:"q_ans_".concat(a+1,"_2"),name:"q_answer_".concat(a+1),value:2,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_2"),className:"ans"},s.a.createElement("textarea",{name:"option_two",value:t.option_two,rows:1,className:"q_ans_inp",type:"text",placeholder:"Type question ".concat(a+1," option 2."),onKeyDown:e.handleKeyDown,spellCheck:"false",onChange:function(t){return e.handleChange(t,a)}})))),s.a.createElement("div",{className:"q_single_answer_2"},s.a.createElement("div",{className:"q_single_answer"},s.a.createElement("input",{checked:3===t.q_answer,type:"radio",id:"q_ans_".concat(a+1,"_3"),name:"q_answer_".concat(a+1),value:3,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_3"),className:"ans"},s.a.createElement("textarea",{name:"option_three",value:t.option_three,rows:1,className:"q_ans_inp",type:"text",placeholder:"Type question ".concat(a+1," option 3."),onKeyDown:e.handleKeyDown,spellCheck:"false",onChange:function(t){return e.handleChange(t,a)}}))),s.a.createElement("div",{className:"q_single_answer"},s.a.createElement("input",{type:"radio",checked:4===t.q_answer,id:"q_ans_".concat(a+1,"_4"),name:"q_answer_".concat(a+1),value:4,onChange:function(t){return e.handleRadioChange(t,a)}}),s.a.createElement("label",{htmlFor:"q_ans_".concat(a+1,"_4"),className:"ans"},s.a.createElement("textarea",{name:"option_four",value:t.option_four,rows:1,className:"q_ans_inp",type:"text",placeholder:"Type question ".concat(a+1," option 4."),onKeyDown:e.handleKeyDown,spellCheck:"false",onChange:function(t){return e.handleChange(t,a)}}))))))),s.a.createElement("div",{className:"q_mark"},s.a.createElement("input",{type:"number",className:"q_index_inp",placeholder:1,value:t.mark,name:"mark",onChange:function(t){return e.handleChange(t,a)}})))})),s.a.createElement("button",{onClick:function(t){return e.handleQuestionAdd(t)},className:"q_add"},"Add"),s.a.createElement("button",{onClick:this.handleSubmit,className:"q_submit"},this.state.updateMode?"Update":"Submit")))}}]),t}(n.Component);Ee.contextType=O;var be=Ee,ve=a(75),ge=a.n(ve),ye=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).SheetJSFT=["xlsx","xlsb","xlsm","xls"].map((function(e){return"."+e})).join(","),a.handleFile=function(e){console.log("handle file called");var t=new FileReader,n=!!t.readAsBinaryString;t.onload=function(e){var t=e.target.result,s=ge.a.read(t,{type:n?"binary":"array",bookVBA:!0}),r=s.SheetNames[0],o=s.Sheets[r],c=ge.a.utils.sheet_to_json(o);a.props.extractData(c)},n?t.readAsBinaryString(a.props.file):t.readAsArrayBuffer(a.props.file)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"excel-control"},s.a.createElement("h2",null,"Upload your ",this.props.title," from Excel"),s.a.createElement("div",{className:"initial-controls"},s.a.createElement("input",{type:"file",name:"file",id:"file",accept:this.SheetJSFT,className:"inputfile",onChange:this.props.uploadHandler}),s.a.createElement("label",{htmlFor:"file",className:"input-label"},this.props.name?"Choosed":"Choose a File"),s.a.createElement("span",{style:{marginLeft:10,marginRight:10}},this.props.name)),this.props.name?s.a.createElement("span",null,s.a.createElement("button",{onClick:this.handleFile,type:"submit",className:"form-button"},"Extract Data"),s.a.createElement("button",{type:"button",className:"form-button",onClick:function(t){return e.props.cancelUpload(t)}},"Cancel")):s.a.createElement("div",null))}}]),t}(n.Component),xe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.student,a=t.name,n=t.password,r=t.studentID,o=t.prevPassword,c=t.newPassword;return s.a.createElement(s.a.Fragment,null,(this.props.addMode||this.props.editMode)&&!this.props.uploadMode&&s.a.createElement("div",{className:"add_data_form"},s.a.createElement("span",{className:"close-icon",onClick:this.props.raiseClose},"\u2716"),s.a.createElement("h2",null,this.props.editMode?"Update Student":"Add Student"),s.a.createElement("form",{onSubmit:this.props.editMode?this.props.raiseUpdate:this.props.raiseSubmit,className:"form-control"},s.a.createElement(S,{name:"name",value:a,label:"Name",onChange:function(t){return e.props.raiseChange(t)},type:"text"}),s.a.createElement(S,{name:"studentID",value:r,label:"StudentID",onChange:function(t){return e.props.raiseChange(t)},type:"text"}),!this.props.editMode&&s.a.createElement(S,{name:"password",value:n,label:"Password",onChange:function(t){return e.props.raiseChange(t)},type:"password"}),this.props.editMode&&s.a.createElement(s.a.Fragment,null,s.a.createElement(S,{name:"prevPassword",value:o,label:"New Password",onChange:function(t){return e.props.raiseChange(t)},type:"password"}),s.a.createElement(S,{name:"newPassword",value:c,label:"Confirm New Password",onChange:function(t){return e.props.raiseChange(t)},type:"password"})),s.a.createElement("div",{className:"button-group"},!this.props.editMode&&s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"submit",className:"form-button"},"Add"),s.a.createElement("button",{onClick:this.props.raiseClearState,className:"form-button"},"Clear")),this.props.editMode&&s.a.createElement("button",{type:"submit",className:"form-button"},"Update")))),this.props.uploadMode&&s.a.createElement("div",{className:"add_data_form"},s.a.createElement("span",{className:"close-icon",onClick:this.props.raiseClose},"\u2716"),s.a.createElement(ye,{uploadHandler:this.props.raiseUpload,cancelUpload:this.props.raiseCancelUpload,extractData:this.props.dataExtractor,name:this.props.selectedFileName,file:this.props.selectedFile,title:"Students"})))}}]),t}(n.Component),we=a(49),_e=a.n(we),Se=a(50),Ce=a.n(Se),Ne=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"oem_table",ref:function(t){return e.componentRef=t}},s.a.createElement("div",{className:"student-print-container"},s.a.createElement(_e.a,{trigger:function(){return s.a.createElement(g.a,{to:"#"},s.a.createElement("img",{className:"student-print",src:Ce.a,alt:"Print"}))},content:function(){return e.componentRef}})),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"StudentID"),s.a.createElement("th",null,"Student Status (".concat(this.props.countActiveStudents()||"0",")")),s.a.createElement("th",null,"Submit Status"),s.a.createElement("th",null,"Password"),s.a.createElement("th",null))),s.a.createElement("tbody",null,this.props.students.map((function(t){return s.a.createElement("tr",{key:t._id},s.a.createElement("td",null,t.name),s.a.createElement("td",null,t.studentID),s.a.createElement("td",null,s.a.createElement(se,{onChange:function(a){return e.props.handleToogleCheckBox(a,t)},status:t.status})),s.a.createElement("td",null,s.a.createElement(se,{onChange:e.props.handleSubmitStatus,status:t.submitStatus})),s.a.createElement("td",null,t.password),s.a.createElement("td",null,s.a.createElement("div",{className:"table-controls"},s.a.createElement("button",{onClick:function(){return e.props.raiseEdit(t)}},s.a.createElement("img",{src:ie.a,alt:"Edit",className:"table-icon-edit"})),s.a.createElement("button",{onClick:function(){return e.props.raiseDelete(t)}},s.a.createElement("img",{src:ce.a,alt:"Delete",className:"table-icon-delete"})))))})))))}}]),t}(n.Component),Oe=function(e){return s.a.createElement("div",{className:"student_controls"},s.a.createElement("span",{className:"exam-title"},"My Students"),s.a.createElement("div",{className:"exam-button-container"},s.a.createElement("button",{onClick:function(){return e.handleBackToExam(e.exam)},className:"button-green"},"Back to Exam"),s.a.createElement("button",{onClick:e.handleAdd,className:"button-green"},"Add Student"),s.a.createElement("button",{onClick:e.handleFileUpload,className:"button-green"},"Upload"),s.a.createElement("button",{onClick:function(){return e.handleAssignStudents(e.exam)},className:"button-green"},"Assign"),s.a.createElement("button",{onClick:function(){return e.handleGoToQuestion(e.exam)},className:"button-green"},"Go to Question")))};function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var je=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={selectedFileName:"",selectedFile:{},students:[],assignedStudents:[],student:{id:"",name:"",status:!1,submitStatus:!1,studentID:"",password:"",prevPassword:"",newPassword:""},errors:{},addMode:!1,editMode:!1,uploadMode:!1,dataChanged:!1},a.cancelUpload=function(){a.setState({selectedFileName:"",selectedFile:{}})},a.handleUpload=function(e){var t=Array.from(e.target.files);t&&a.setState({selectedFileName:t[0].name,selectedFile:t[0]})},a.handleEdit=function(e){var t=De({},a.state.student);t.id=e._id,t.name=e.name,t.status=e.status,t.studentID=e.studentID,t.password="";var n=a.state.editMode;a.setState({student:t,editMode:!n})},a.handleChange=function(e){var t=e.currentTarget,n=De({},a.state.student);n[t.name]=t.value,a.setState({student:n})},a.handleClearState=function(e){e.preventDefault();var t=De({},a.state.student);t.name="",t.id="",t.status=!1,t.studentID="",t.newPassword="",t.prevPassword="",t.password="",a.setState({student:t,editMode:!1})},a.handleCancelUpdate=function(){var e=De({},a.state.student);e.name="",e.id="",e.studentID="",e.status=!1,e.newPassword="",e.prevPassword="",e.password="",a.setState({student:e,editMode:!1})},a.handleDelete=function(e){var t=a.state.students.filter((function(t){return t._id!==e._id}));a.setState({students:t});var n=a.context.userID,s=a.context.token,r={query:'\n      mutation {\n        removeStudent(studentID: "'.concat(e._id,'", teacherID: "').concat(n,'") {\n          _id\n          name\n          studentID\n        }\n      }\n      ')};N(r,s,(function(e){}))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.student,n=t.name,s=t.studentID,r=t.password,o=t.status;""!==n.trim()&&""!==s.trim()&&""!==r.trim()||E.b.error("Invalid Credentials");var c=a.context.userID,l=a.context.token,i={query:'\n        mutation {\n          addStudent (studentInput : {\n            name: "'.concat(n,'",\n            status: ').concat(o,',\n            password: "').concat(r,'",\n            studentID: "').concat(s,'",\n            teacherID: "').concat(c,'",\n          }) {\n            _id\n            name\n            studentID\n            status\n            password\n          }\n        }\n      ')};N(i,l,(function(e){e.data.addStudent&&E.b.success("Added a new Student");var t=Object(V.a)(a.state.students);t.unshift(e.data.addStudent),a.setState({students:t}),a.handleCancelUpdate(),a.handleClose()}))},a.handleUpdate=function(e){e.preventDefault();var t=a.context.token,n=a.context.userID,s=De({},a.state.student),r=s.id,o=s.name,c=s.studentID,l=s.prevPassword,i=s.newPassword,u=s.status,d={query:'\n        mutation {\n          updateStudent (studentUpdateInput : {\n            _id: "'.concat(r,'",\n            name: "').concat(o,'",\n            status: ').concat(u,',\n            studentID: "').concat(c,'",\n            prevPassword: "').concat(l,'",\n            newPassword: "').concat(i,'",\n            teacherID: "').concat(n,'"\n          }) {\n            _id\n            name\n            studentID\n            password\n            status\n          }\n        }\n      ')};N(d,t,(function(e){var t=Object(V.a)(a.state.students),n=e.data.updateStudent,s=n._id,r=n.name,o=n.studentID,c=n.password,l=n.status;t.map((function(e){return e._id===s&&(e.name=r,e.studentID=o,e.status=l,e.password=c),e})),E.b.success("Updated"),a.setState({students:t}),a.handleCancelUpdate()}))},a.handleAdd=function(){a.setState({addMode:!0})},a.handleClose=function(){a.setState({addMode:!1,editMode:!1,uploadMode:!1}),a.handleCancelUpdate()},a.handleFileUpload=function(){a.setState({uploadMode:!0})},a.handleAssignStudents=function(e){var t=a.context.token,n=a.context.userID,s=Object(V.a)(a.state.students).filter((function(e){return!0===e.status})),r=[];s.map((function(e){return r.push('"'.concat(e._id,'"'))}));var o={query:'\n      mutation{\n        assign_students_to_exam(assignInput: {\n          examID: "'.concat(e._id,'", \n          teacherID: "').concat(n,'", \n          studentIDs : [').concat(r,"]})\n      }\n      ")};N(o,t,(function(e){e.data&&(E.b.success("You have assigned ".concat(r.length," students")),a.props.refresh_exams())}))},a.handleToogleCheckBox=function(e,t){var n=Object(V.a)(a.state.students),s=n.find((function(e){return e._id===t._id}));s&&(s.status=e.target.checked),a.setState({students:n})},a.countActiveStudents=function(){var e=Object(V.a)(a.state.students).filter((function(e){return!0===e.status})).length;return"".concat(e)},a.handleSubmitStatus=function(e){e.preventDefault(),E.b.info("You cant change this status")},a.generateRandomNumber=function(){},a.dataExtractor=function(e){var t=a.context.token,n=a.context.userID,s=a.props.exam._id;if(e){var r=[];r=e.map((function(e){return{name:e["Student Name"],studentID:e["Student ID"],status:!0,password:"".concat(Math.floor(1e3+9e3*Math.random()))}})),a.setState({uploadMode:!1});var o=[];r.map((function(e){return o.push('{\n          name : "'.concat(e.name,'",\n          studentID: "').concat(e.studentID,'",\n          status: ').concat(e.status,',\n          password: "').concat(e.password,'"\n        }'))}));var c={query:'\n        mutation {\n          addMultipleStudent(teacherID: "'.concat(n,'", examID: "').concat(s,'", multipleStudentInput: [').concat(o,"]){\n            _id\n            name\n            studentID\n            password\n            status\n          }\n        }\n        ")};N(c,t,(function(e){var t=e.data.addMultipleStudent,n=a.state.students;t.map((function(e){return n.push(e)})),a.setState({students:n}),E.b.success("Excel Read Successfull")}))}else E.b.error("Error Reading File")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.exam.submittedStudents||[],a=this.context.token,n=this.context.userID,s={query:'\n        query {\n          get_all_students (teacherID: "'.concat(n,'") {\n            _id\n            name\n            studentID\n            password\n            status\n            submitStatus\n          }\n        }\n      ')},r={query:'\n        query {\n          get_assigned_student (teacherID: "'.concat(n,'", examID: "').concat(this.props.exam._id,'") {\n            _id\n            name\n            studentID\n            password\n            status\n            submitStatus\n          }\n        }\n      ')};N(r,a,(function(n){n.data&&e.setState({assignedStudents:n.data.get_assigned_student});var r=n.data.get_assigned_student;N(s,a,(function(a){for(var n=a.data.get_all_students,s=0;s<n.length;s++){if(0!==r.length)for(var o=0;o<r.length;o++)n[s]._id===r[o]._id&&(n[s].status=!0);if(0!==t.length)for(var c=0;c<t.length;c++)n[s]._id===t[c]._id&&(n[s].submitStatus=!0)}var l=e.state.students;n.map((function(e){return l.push(e)})),e.setState({students:l})}))}))}},{key:"render",value:function(){var e=this.state,t=e.addMode,a=e.editMode,n=e.uploadMode,r=e.students,o=e.student,c=e.selectedFileName,l=e.selectedFile;return s.a.createElement("div",{className:"student-content-container"},s.a.createElement(Oe,{exam:this.props.exam,handleAdd:this.handleAdd,handleFileUpload:this.handleFileUpload,handleAssignStudents:this.handleAssignStudents,handleBackToExam:this.props.handleBackToExam,handleGoToQuestion:this.props.handleGoToQuestion}),s.a.createElement(Ne,{students:r,raiseEdit:this.handleEdit,raiseDelete:this.handleDelete,countActiveStudents:this.countActiveStudents,handleToogleCheckBox:this.handleToogleCheckBox,handleSubmitStatus:this.handleSubmitStatus}),(t||a||n)&&s.a.createElement(xe,{student:o,selectedFileName:c,selectedFile:l,editMode:a,addMode:t,uploadMode:n,dataExtractor:this.dataExtractor,raiseUpdate:this.handleUpdate,raiseClose:this.handleClose,raiseSubmit:this.handleSubmit,raiseChange:this.handleChange,raiseClearState:this.handleClearState,raiseUpload:this.handleUpload,raiseCancelUpload:this.cancelUpload}),(t||a||n)&&s.a.createElement(H,null))}}]),t}(n.Component);je.contextType=O;var Ie=je,qe=(a(261),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={students:[{_id:"",name:"",studentID:"",myMarks:0,answers:[{questionIndex:1,studentAnswer:1}]}],questions:[],answer_view_mode:!1,selected_student:""},a.handleClose=function(){a.setState({answer_view_mode:!1,selected_student:""})},a.handleViewResult=function(e){a.setState({answer_view_mode:!0,selected_student:e})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Object(V.a)(this.props.exam.submittedStudents),a=this.context.token,n=[];t.map((function(e){return n.push('"'.concat(e._id,'"'))}));var s={query:"\n            query {\n                get_answer_by_students (studentIDs : [\n                  ".concat(n,"\n                ]) {\n                    _id\n                    student {\n                        _id\n                        name\n                        studentID\n                    }\n                    answers {\n                        questionIndex\n                        studentAnswer\n                    }\n                    myMarks\n                }\n              }\n            ")},r={query:'\n            query {\n                get_question_by_exam (examID : "'.concat(this.props.exam._id,'") {\n                    _id\n                    questions {\n                        id\n                        text\n                        mark\n                        image\n                        options {\n                            id\n                            text\n                            answer\n                        }\n                    }\n                }\n              }\n            ')};N(r,a,(function(t){e.setState({questions:t.data.get_question_by_exam.questions})})),N(s,a,(function(t){if(t.data){console.log(t.data.get_answer_by_students);var a=t.data.get_answer_by_students,n=[];a.map((function(e){var t={_id:e.student._id,name:e.student.name,studentID:e.student.studentID,myMarks:e.myMarks,answers:[]};return e.answers.map((function(e){var a={questionIndex:e.questionIndex,studentAnswer:e.studentAnswer};return t.answers.push(a)})),n.push(t)})),e.setState({students:n})}}))}},{key:"render",value:function(){var e=this,t=this.props.exam,a=t.title,n=t.code,r=t.totalMarks,o=this.state.students;return s.a.createElement("div",{className:"result-container-all"},s.a.createElement("div",{className:"result-container",ref:function(t){return e.componentRef=t}},s.a.createElement("div",{className:"r-heading"},s.a.createElement("div",{className:"r-left"},s.a.createElement(_e.a,{trigger:function(){return s.a.createElement(g.a,{to:"#"},s.a.createElement("img",{className:"s-print",src:Ce.a,alt:"Print"}))},content:function(){return e.componentRef}})),s.a.createElement("div",{className:"r-middle"},s.a.createElement("h1",null,"Result of ".concat(a)),s.a.createElement("h2",null,"Exam Code ".concat(n))),s.a.createElement("div",{className:"r-right"})),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Student ID"),s.a.createElement("th",null,"My Marks"),s.a.createElement("th",null,"Full Marks"))),s.a.createElement("tbody",null,o.map((function(t){return s.a.createElement("tr",{onClick:function(){return e.handleViewResult(t._id)},className:"result-table",key:t._id},s.a.createElement("td",null,t.name),s.a.createElement("td",null,t.studentID),s.a.createElement("td",null,t.myMarks),s.a.createElement("td",null,r))}))))),this.state.answer_view_mode&&s.a.createElement("div",{className:"student_result"},s.a.createElement("div",{className:"student_result_heading"},s.a.createElement("span",{className:"close-icon",onClick:this.handleClose},"\u2716"),s.a.createElement("h2",null,"Students Result")),s.a.createElement("div",{className:"student_result_info"},"asasas"),s.a.createElement("div",{className:"student_result_body"},this.state.questions.map((function(e,t){return s.a.createElement("div",{key:t,className:"std-ans-single"},s.a.createElement("div",{className:"std-ans-serial"},s.a.createElement("h3",null,e.id,".")),s.a.createElement("div",{className:"std-ans-data"},s.a.createElement("div",{className:"std-ans-data-title"},s.a.createElement("h3",null,e.text)),s.a.createElement("div",{className:"std-ans-data-box"},s.a.createElement("div",{className:"std-ans-data-options"},e.options.map((function(e,t){return s.a.createElement("div",{key:t,className:"std-ans-data-option"},s.a.createElement("div",{className:"std-ans-data-option-no"},s.a.createElement("h3",null,e.id,".")),s.a.createElement("div",{className:"std-ans-data-option-text"},s.a.createElement("h3",null,e.text)))}))),s.a.createElement("div",{className:"std-ans-data-image"},s.a.createElement("img",{src:e.image,alt:""})))),s.a.createElement("div",{className:"std-ans-mark"},s.a.createElement("h3",null,e.mark)))})))),this.state.answer_view_mode&&s.a.createElement(H,null))}}]),t}(n.Component));qe.contextType=O;var Pe=qe,Te=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={selected:0,examMode:!1},a.handleQuestion=function(e){a.setState({selected:2}),a.props.switchToQuestion(e)},a.handleStudent=function(e){a.setState({selected:1}),a.props.switchToStudents(e)},a.handleResult=function(e){a.setState({selected:3}),a.props.switchToResult(e)},a.handleTabInputChange=function(e){a.setState({selected:0})},a.handleBackToExam=function(e){a.setState({selected:0}),a.props.switchToExams()},a.handleGoToQuestion=function(e){a.setState({selected:2}),a.props.switchToQuestion(e)},a.handleStartExam=function(e){console.log("enter start exam"),e.status?(a.setState({examMode:!0}),localStorage.setItem("exam_id",e._id),a.context.setExam(e._id),a.props.history.push("/api/examRoom")):E.b.info("Exam status must be true")},a.enterOngoingExam=function(e){console.log("enter on going exam"),e.status?(a.setState({examMode:!0}),a.props.history.push("/api/examRoom")):E.b.info("Exam status must be true")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(ae,{selected:this.state.selected,handleTabInputChange:this.handleTabInputChange},s.a.createElement(ne,{title:"Exams"},s.a.createElement(he,{exam:this.props.exam,exams:this.props.exams,semester:this.props.semester,year:this.props.year,handleToogleCheckBoxExam:this.props.handleToogleCheckBoxExam,handleUpdate:this.props.handleUpdate,handleAddExam:this.props.handleAddExam,handleDeleteExam:this.props.handleDeleteExam,handleExamEdit:this.props.handleExamEdit,clearState:this.props.clearState,onInputChange:this.props.onInputChange,handleQuestion:this.handleQuestion,handleStudent:this.handleStudent,handleResult:this.handleResult,handleSemesterChange:this.props.handleSemesterChange,handleYearChange:this.props.handleYearChange,handleStartExam:this.handleStartExam,enterOngoingExam:this.enterOngoingExam})),s.a.createElement(ne,{title:"Students"},s.a.createElement(Ie,{exam:this.props.exam,handleGoToQuestion:this.handleGoToQuestion,handleBackToExam:this.handleBackToExam,reresh_exams:this.props.refresh_exams})),s.a.createElement(ne,{title:"Question"},s.a.createElement(be,{exam:this.props.exam})),s.a.createElement(ne,{title:"Result"},s.a.createElement(Pe,{exam:this.props.exam})))}}]),t}(n.Component);Te.contextType=O;var Me=Te;function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Re=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={teacher:{prevPassword:"",newPassword:"",confirmNewPassword:""},updated:!1},a.handleChange=function(e){var t=e.currentTarget,n=Ue({},a.state.teacher);n[t.name]=t.value,a.setState({teacher:n})},a.handleSubmit=function(e){e.preventDefault();var t=Ue({},a.state.teacher),n=t.prevPassword,s=t.newPassword,r=t.confirmNewPassword;if(""===n||""===s||""===r)return E.b.error("Invalid Credentials"),void a.handleClearState();if(r!==s)return E.b.error("Password Mismatch"),void a.handleClearState();var o=a.context.userID,c={query:'\n            mutation {\n            changeTeacherPassword (prevPassword: "'.concat(n,'", newPassword: "').concat(s,'", teacherID: "').concat(o,'") {\n                _id\n                name\n            }\n            }\n        ')},l=a.context.token;N(c,l,(function(e){console.log(e),E.b.success("Password Update Successful");var t=Ue({},a.state.teacher);a.handleClearState(),a.setState({teacher:t})}))},a.handleClearState=function(e){e&&e.preventDefault();var t=Ue({},a.state.teacher);t.prevPassword="",t.newPassword="",t.confirmNewPassword="",a.setState({teacher:t})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.teacher,t=e.prevPassword,a=e.newPassword,n=e.confirmNewPassword;return s.a.createElement("div",{className:"change_pass_container"},s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-control"},s.a.createElement(S,{name:"prevPassword",value:t,label:"Current Password",onChange:this.handleChange,type:"password"}),s.a.createElement(S,{name:"newPassword",value:a,label:"New Password",onChange:this.handleChange,type:"password"}),s.a.createElement(S,{name:"confirmNewPassword",value:n,label:"Confirm New Password",onChange:this.handleChange,type:"password"}),s.a.createElement("div",{className:"button-group"},s.a.createElement("button",{type:"submit",className:"form-button"},"Update"),s.a.createElement("button",{className:"form-button",onClick:this.handleClearState},"Clear"))))}}]),t}(n.Component);Re.contextType=O;var Fe=Re;function Be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Le=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={semester:"SPRING",year:"2019",exams:[],filteredExams:[],exam:{id:"",students:[],loggedInStudents:[],submittedStudent:[],title:"",code:"",password:"",prevPassword:"",newPassword:"",totalMarks:0,examDate:"",totalTimeInMin:0,status:!1,courseTitle:"",courseCode:"",semester:"SPRING",year:2019}},a.get_exams=function(){var e=a.context.token,t=a.context.userID,n={query:'\n        query {\n          get_all_exams (teacherID: "'.concat(t,'")  {\n            title\n            _id\n            code\n            password\n            totalMarks\n            examDate\n            totalTimeInMin\n            status\n            semester\n            loggedInStudents {\n              _id\n            }\n            submittedStudents {\n              _id\n            }\n            year\n            course{\n              title\n              code\n            }\n            students {\n              _id\n            }\n          }\n        }\n      ')};N(n,e,(function(e){var t=e.data.get_all_exams,n=a.state,s=n.semester,r=n.year,o=t.filter((function(e){return e.semester===s&&Number(e.year)===Number(r)}));a.setState({exams:t,filteredExams:o})}))},a.handleSemesterChange=function(e){var t=e.currentTarget,n=a.state.exams,s=a.state.year,r=n.filter((function(e){return e.semester===t.value&&e.year===s}));a.setState({filteredExams:r,semester:t.value})},a.handleYearChange=function(e){var t=e.currentTarget,n=a.state.exams,s=a.state.semester,r=n.filter((function(e){return e.semester===s&&e.year===t.value}));a.setState({filteredExams:r,year:t.value})},a.onInputChange=function(e){a.setState({exam:e})},a.handleAddExam=function(){var e=a.context.userID,t=a.context.token,n=a.state.exam,s=n.title,r=n.code,o=n.password,c=n.totalMarks,l=n.examDate,i=n.totalTimeInMin,u=n.status,d=n.courseCode,m=n.courseTitle,h=n.semester,p=n.year,f={query:'\n      mutation {\n          addExam(examInput: {\n            title: "'.concat(s,'", \n            code: "').concat(r,'",\n            password: "').concat(o,'",\n            totalMarks: ').concat(c,',\n            examDate: "').concat(l,'",\n            totalTimeInMin: ').concat(i,",\n            status: ").concat(u,',\n            course: {\n              title: "').concat(m,'",\n              code: "').concat(d,'"\n            }\n            teacher: "').concat(e,'",\n            semester: "').concat(h,'",\n            year: ').concat(p,"\n          }){\n            _id\n            title\n            code\n            password\n            totalMarks\n            examDate\n            totalTimeInMin\n            status\n            semester\n            year\n            course {\n                title\n                code\n            }\n          }\n        }\n  ")};N(f,t,(function(e){console.log(e);var t=e.data.addExam;if(t){E.b.success("Added a new Exam");var n=a.state.exams,s=a.state,r=s.semester,o=s.year;console.log(r),console.log(t.semester);var c=a.state.filteredExams;t.semester===r&&t.year===Number(o)&&c.push(t),n.push(t),a.setState({exams:n,filteredExams:c})}}))},a.handleExamEdit=function(e){var t=a.state.exam;t.id=e._id,t.title=e.title,t.code=e.code,t.status=e.status,t.totalMarks=e.totalMarks,t.totalTimeInMin=e.totalTimeInMin,t.examDate=e.examDate,t.semester=e.semester,t.year=e.year,t.courseCode=e.course.code,t.courseTitle=e.course.title,a.setState({exam:t})},a.handleUpdate=function(e){e.preventDefault();var t=a.context.token,n=a.context.userID,s=a.state.exam,r=s.id,o=s.title,c=s.code,l=s.prevPassword,i=s.newPassword,u=s.status,d=s.totalMarks,m=s.totalTimeInMin,h=s.examDate,p=s.semester,f=s.year,b=s.courseTitle,v=s.courseCode,g={query:'\n        mutation {\n          updateExam (examUpdateInput : {\n            _id: "'.concat(r,'",\n            title: "').concat(o,'",\n            code: "').concat(c,'",\n            prevPassword: "').concat(l,'",\n            newPassword: "').concat(i,'",\n            status: ').concat(u,",\n            totalMarks: ").concat(d,",\n            totalTimeInMin: ").concat(m,',\n            examDate: "').concat(h,'",\n            semester: "').concat(p,'",\n            year: "').concat(f,'",\n            course: {\n              title: "').concat(b,'",\n              code: "').concat(v,'",\n            }\n            teacherID: "').concat(n,'"\n          }) {\n            _id\n            title\n            code\n            password\n            totalMarks\n            examDate\n            totalTimeInMin\n            status\n            semester\n            year\n            course{\n              title\n              code\n            }\n          }\n        }\n      ')};N(g,t,(function(e){var t=Object(V.a)(a.state.exams),n=e.data.updateExam,s=n._id,r=n.title,o=n.code,c=n.password,l=n.status,i=n.totalMarks,u=n.totalTimeInMin,d=n.examDate,m=n.course,h=n.semester,p=n.year;t.map((function(e){return e._id===s&&(e.id=s,e.title=r,e.code=o,e.password=c,e.status=l,e.totalMarks=i,e.totalTimeInMin=u,e.examDate=d,e.semester=h,e.year=p,e.courseCode=m.code,e.courseTitle=m.title),e})),E.b.success("Updated ".concat(r)),a.setState({exams:t}),a.handleClearState()}))},a.handleClearState=function(e){e&&e.preventDefault();var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Be(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state.exam);t.id="",t.title="",t.code="",t.password="",t.prevPassword="",t.newPassword="",t.status=!1,t.totalMarks=0,t.totalTimeInMin=0,t.examDate="",t.courseCode="",t.courseTitle="",t.semester="SPRING",t.year=2019,a.setState({exam:t})},a.handleDeleteExam=function(e){var t=a.state.filteredExams.filter((function(t){return t._id!==e._id}));a.setState({filteredExams:t});var n=a.context.userID,s=a.context.token,r={query:'\n      mutation {\n        removeExam(examID: "'.concat(e._id,'", teacherID: "').concat(n,'") {\n          _id\n          title\n        }\n      }\n      ')};N(r,s,(function(e){E.b.success("Deleted ".concat(e.data.removeExam.title))}))},a.refresh_exams=function(){console.log("refresh-exam reached"),a.get_exams()},a.switchToQuestion=function(e){a.setState({exam:e})},a.switchToStudents=function(e){a.setState({exam:e})},a.switchToResult=function(e){a.setState({exam:e})},a.switchToExams=function(){a.handleClearState()},a.handleToogleCheckBoxExam=function(e,t){var n=a.context.token,s=Object(V.a)(a.state.exams),r=s.find((function(e){return e._id===t._id}));r&&(r.status=e.target.checked),a.setState({exams:s});var o={query:"\n      mutation {\n        changeExamStatus(status: ".concat(r.status,', examID: "').concat(t._id,'")\n      }\n      ')};N(o,n,(function(e){}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.get_exams()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement(te,null),s.a.createElement("div",{className:"content-container"},s.a.createElement(c.d,null,s.a.createElement(c.b,{path:"/api/teacher/change_password",component:Fe}),s.a.createElement(c.b,{path:"/api/teacher/myExam",render:function(t){return s.a.createElement(Me,Object.assign({},t,{exam:e.state.exam,exams:e.state.filteredExams,semester:e.state.semester,year:e.state.year,handleUpdate:e.handleUpdate,handleAddExam:e.handleAddExam,handleDeleteExam:e.handleDeleteExam,handleExamEdit:e.handleExamEdit,clearState:e.handleClearState,onInputChange:e.onInputChange,handleSemesterChange:e.handleSemesterChange,handleToogleCheckBoxExam:e.handleToogleCheckBoxExam,handleYearChange:e.handleYearChange,switchToQuestion:e.switchToQuestion,switchToStudents:e.switchToStudents,switchToResult:e.switchToResult,switchToExams:e.switchToExams,refresh_exams:e.refresh_exams}))}}))))}}]),t}(n.Component);Le.contextType=O;var Qe=Le;function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ye(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var He=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={account:{username:"",password:""},isLogin:!0},a.handleChange=function(e){var t=e.currentTarget,n=Ge({},a.state.account);n[t.name]=t.value,a.setState({account:n})},a.handleSubmit=function(e){e.preventDefault();var t=Ge({},a.state.account),n=t.username,s=t.password,r={query:'\n        query {\n          teacherLogin (name: "'.concat(n,'", password: "').concat(s,'") {\n            token\n          }\n        }\n      ')};N(r,"",(function(e){try{var t=e.data.teacherLogin.token;if(t){var n=_.a.decode(t),s=n.teacherID,r=n.name,o=n.accessType,c=n.exp;localStorage.setItem("token",t),localStorage.setItem("userID",s),localStorage.setItem("username",r),localStorage.setItem("accessType",o),localStorage.setItem("tokenExpiration",c),a.context.login(t,s,r,o,c),a.props.history.push("/api/teacher/myExam"),E.b.success("Successfully logged in")}}catch(l){E.b.error(e.errors[0].message)}}))},a.handleClearState=function(e){e.preventDefault();var t=Ge({},a.state.account);t.username="",t.password="",a.setState({account:t})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.account;return s.a.createElement("div",{className:"login_form"},s.a.createElement("h2",null,"Teacher's Login"),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-control"},s.a.createElement(S,{name:"username",value:e.username,label:"Username",onChange:this.handleChange,type:"text"}),s.a.createElement(S,{name:"password",value:e.password,label:"Password",onChange:this.handleChange,type:"password"}),s.a.createElement("div",{className:"form-button-group"},s.a.createElement("button",{type:"submit",className:"form-button"},"Login"),s.a.createElement("button",{className:"form-button",onClick:this.handleClearState},"Clear"),s.a.createElement(g.a,{to:"/"},s.a.createElement("button",{className:"form-button"},"Back")))))}}]),t}(n.Component);He.contextType=O;var Ke=He;function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var We=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={selectedFileName:"",selectedFile:{},teachers:[],teacher:{id:"",name:"",dept:"CSE",status:!1,password:"",prevPassword:"",newPassword:""},editMode:!1,uploadMode:!1,addMode:!1,updated:!1,options:[{_id:1,name:"CSE"},{_id:2,name:"BBA"},{_id:3,name:"FOOD"},{_id:4,name:"LAW"}],errors:{}},a.cancelUpload=function(){a.setState({selectedFileName:""})},a.dataExtractor=function(e){var t=a.context.token,n=a.context.userID;if(e){var s=[];s=e.map((function(e){return{name:e["Teacher Name"],deptCode:e.Department,status:!0,password:"1234"}})),a.setState({uploadMode:!1});var r=[];s.map((function(e){return r.push('{\n          name : "'.concat(e.name,'",\n          deptCode: "').concat(e.deptCode,'",\n          status: ').concat(e.status,',\n          password: "').concat(e.password,'"\n        }'))}));var o={query:'\n        mutation {\n          addMultipleTeacher(adminID: "'.concat(n,'", multipleTeacherInput: [').concat(r,"]){\n            _id\n            name\n            password\n            status\n            deptCode\n          }\n        }\n        ")};N(o,t,(function(e){var t=e.data.addMultipleTeacher,n=a.state.teachers;t.map((function(e){return n.push(e)})),a.setState({teachers:n}),E.b.success("Excel Read Successfull")}))}else E.b.error("Error Reading File")},a.handleUpload=function(e){var t=Array.from(e.target.files);t&&t[0]&&a.setState({selectedFileName:t[0].name,selectedFile:t[0]})},a.handleSubmit=function(e){e.preventDefault();var t=ze({},a.state.teacher),n=t.name,s=t.dept,r=t.status,o=t.password,c=a.context.userID,l=a.context.token,i={query:'\n        mutation {\n          addTeacher (teacherInput : {\n            name: "'.concat(n,'",\n            password: "').concat(o,'",\n            deptCode: "').concat(s,'",\n            adminID: "').concat(c,'",\n            status: ').concat(r,"\n          }) {\n            _id\n            name\n            password\n            deptCode\n            status\n          }\n        }\n      ")};N(i,l,(function(e){E.b.success("Added a new Teacher");var t=Object(V.a)(a.state.teachers);t.unshift(e.data.addTeacher),a.setState({teachers:t}),a.handleClose()}))},a.handleDelete=function(e){var t=a.state.teachers.filter((function(t){return t._id!==e._id}));a.setState({teachers:t});var n=a.context.userID,s=a.context.token,r={query:'\n      mutation {\n        removeTeacher(teacherID: "'.concat(e._id,'", adminID: "').concat(n,'") {\n          _id\n          name\n        }\n      }\n      ')};N(r,s,(function(e){}))},a.handleEdit=function(e){var t=ze({},a.state.teacher);t.id=e._id,t.name=e.name,t.dept=e.deptCode,t.status=e.status,t.password="";var n=a.state.editMode;a.setState({teacher:t,editMode:!n})},a.handleChange=function(e){var t=e.currentTarget,n=ze({},a.state.teacher);n[t.name]=t.value,a.setState({teacher:n})},a.toogleCheckBox=function(e){var t=ze({},a.state.teacher);t.status=e.target.checked,a.setState({teacher:t})},a.handleSaveNewTeachers=function(){console.log("called")},a.handleClearState=function(e){e&&e.preventDefault();var t=ze({},a.state.teacher);t.name="",t.id="",t.dept="CSE",t.status=!1,t.password="",t.newPassword="",t.prevPassword="",a.setState({teacher:t,editMode:!1})},a.handleUpdate=function(e){e.preventDefault();var t=a.context.token,n=a.context.userID,s=ze({},a.state.teacher),r=s.id,o=s.name,c=s.status,l=s.dept,i=s.prevPassword,u=s.newPassword;if(i===u){var d={query:'\n        mutation {\n          updateTeacher (teacherUpdateInput : {\n            _id: "'.concat(r,'",\n            name: "').concat(o,'",\n            deptCode: "').concat(l,'",\n            status: ').concat(c,',\n            prevPassword: "').concat(i,'",\n            newPassword: "').concat(u,'",\n            adminID: "').concat(n,'"\n          }) {\n            _id\n            name\n            deptCode\n            status\n          }\n        }\n      ')};N(d,t,(function(e){console.log(e);var t=Object(V.a)(a.state.teachers),n=e.data.updateTeacher,s=n._id,r=n.name,o=n.deptCode,c=n.status;t.map((function(e){return e._id===s&&(e.name=r,e.status=c,e.deptCode=o),e})),E.b.success("Updated"),a.handleClearState()}))}else E.b.error("Password Mismatch")},a.handleAdd=function(){a.setState({addMode:!0})},a.handleClose=function(){a.setState({addMode:!1,editMode:!1,uploadMode:!1}),a.handleClearState()},a.handleFileUpload=function(){a.setState({uploadMode:!0})},a.handleStatusChange=function(e,t){var n=a.context.token,s=Object(V.a)(a.state.teachers),r=s.find((function(e){return e._id===t._id}));r&&(r.status=e.target.checked),a.setState({teachers:s});var o={query:"\n      mutation {\n        updateTeacherStatus(status: ".concat(r.status,', teacherID: "').concat(t._id,'")\n      }\n      ')};N(o,n,(function(e){console.log(e.data),e.data.updateTeacherStatus&&E.b.success("Success")}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context.token,a=this.context.userID,n={query:'\n        query {\n          get_all_teachers (adminID: "'.concat(a,'") {\n            _id\n            name\n            password\n            deptCode\n            status\n          }\n        }\n      ')};N(n,t,(function(t){var a=Object(V.a)(e.state.teachers);t.data.get_all_teachers.map((function(e){return a.push(e)})),e.setState({teachers:a})}))}},{key:"render",value:function(){var e=this,t=this.state.teacher,a=t.name,n=t.password,r=t.status,o=t.prevPassword,c=t.newPassword,l=this.state,i=l.editMode,u=l.addMode,d=l.uploadMode;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"student_controls"},s.a.createElement("h2",null,"My Teachers"),s.a.createElement("button",{onClick:this.handleAdd,className:"button-green"},"Add"),s.a.createElement("button",{onClick:this.handleFileUpload,className:"button-green"},"Upload")),s.a.createElement("div",{className:"my_teachers_table"},s.a.createElement("table",null,s.a.createElement("caption",{className:"table-title"},"My Listed Teachers"),s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Department"),s.a.createElement("th",null,"Password"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null),s.a.createElement("th",null))),s.a.createElement("tbody",null,this.state.teachers.map((function(t){return s.a.createElement("tr",{key:t._id},s.a.createElement("td",null,t.name),s.a.createElement("td",null,t.deptCode),s.a.createElement("td",null,t.password),s.a.createElement("td",null,s.a.createElement(se,{onChange:function(a){return e.handleStatusChange(a,t)},status:t.status})),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return e.handleEdit(t)},className:"button-green"},"Edit")),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return e.handleDelete(t)},className:"button-red"},"Delete")))}))))),(u||i)&&!d&&s.a.createElement("div",{className:"add_data_form"},s.a.createElement("span",{className:"close-icon",onClick:this.handleClose},"\u2716"),s.a.createElement("h2",null,i?"Update Teacher":"Add Teacher"),s.a.createElement("form",{onSubmit:i?this.handleUpdate:this.handleSubmit,className:"form-control"},s.a.createElement(S,{name:"name",value:a,label:"Name",onChange:this.handleChange,type:"text"}),s.a.createElement(re,{name:"dept",label:"Department",onChange:this.handleChange,options:this.state.options,value:this.state.teacher.dept}),!i&&s.a.createElement(S,{name:"password",value:n,label:"Password",onChange:this.handleChange,type:"password"}),i&&s.a.createElement(s.a.Fragment,null,s.a.createElement(S,{name:"prevPassword",value:o,label:"New Password",onChange:this.handleChange,type:"password"}),s.a.createElement(S,{name:"newPassword",value:c,label:"Confirm New Password",onChange:this.handleChange,type:"password"})),s.a.createElement(se,{onChange:function(t){return e.toogleCheckBox(t)},status:r,title:"Status"}),s.a.createElement("div",{className:"button-group"},!i&&s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"submit",className:"form-button"},"Add"),s.a.createElement("button",{onClick:this.handleClearState,className:"form-button"},"Clear")),i&&s.a.createElement("button",{type:"submit",className:"form-button"},"Update")))),d&&s.a.createElement("div",{className:"add_data_form"},s.a.createElement("span",{className:"close-icon",onClick:this.handleClose},"\u2716"),s.a.createElement(ye,{uploadHandler:this.handleUpload,cancelUpload:this.cancelUpload,extractData:this.dataExtractor,name:this.state.selectedFileName,file:this.state.selectedFile,title:"Teachers"})),(u||i||d)&&s.a.createElement(H,null))}}]),t}(n.Component);We.contextType=O;var Ve=We;function Xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xe(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $e=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={admin:{prevPassword:"",newPassword:"",confirmNewPassword:""},updated:!1},a.handleChange=function(e){var t=e.currentTarget,n=Ze({},a.state.admin);n[t.name]=t.value,a.setState({admin:n})},a.handleClearState=function(e){e.preventDefault();var t=Ze({},a.state.admin);t.prevPassword="",t.newPassword="",t.confirmNewPassword="",a.setState({admin:t})},a.handleSubmit=function(e){e.preventDefault();var t=Ze({},a.state.admin),n=t.prevPassword,s=t.newPassword,r=t.confirmNewPassword,o=a.context.userID;if(""!==n&&""!==s&&""!==r)if(r===s){var c={query:'\n        mutation {\n          changeAdminPassword (prevPassword: "'.concat(n,'", newPassword: "').concat(s,'", adminID: "').concat(o,'") {\n            _id\n            name\n          }\n        }\n      ')},l=a.context.token;fetch("http://localhost:4000/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log("UPDATED "+e),E.b.success("Password Update Successful");var t=Ze({},a.state.admin);t.prevPassword="",t.newPassword="",a.setState({admin:t,updated:!0})})).catch((function(e){E.b.error("Something went wrong while updating")}))}else E.b.error("Password Mismatch");else E.b.error("Invalid Credentials")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.admin,t=e.prevPassword,a=e.newPassword,n=e.confirmNewPassword;return s.a.createElement("div",{className:"change_pass_container"},s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-control"},s.a.createElement(S,{name:"prevPassword",value:t,label:"Current Password",onChange:this.handleChange,type:"password"}),s.a.createElement(S,{name:"newPassword",value:a,label:"New Password",onChange:this.handleChange,type:"password"}),s.a.createElement(S,{name:"confirmNewPassword",value:n,label:"Confirm New Password",onChange:this.handleChange,type:"password"}),s.a.createElement("div",{className:"button-group"},s.a.createElement("button",{type:"submit",className:"form-button"},"Update"),s.a.createElement("button",{className:"form-button",onClick:this.handleClearState},"Clear"))))}}]),t}(n.Component);$e.contextType=O;var et=$e,tt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(O.Consumer,null,(function(e){return s.a.createElement("div",{className:"side-nav"},s.a.createElement("div",{className:"nav-container"},s.a.createElement("h2",{className:"title-admin"},e.username),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(g.b,{to:"/api/admin/myTeachers",activeClassName:"nav-active",className:"nav-link"},"Manage Teachers")),s.a.createElement("li",null,s.a.createElement(g.b,{to:"/api/admin/change_password",activeClassName:"nav-active",className:"nav-link"},"Change My Password")),s.a.createElement("li",null,s.a.createElement(g.b,{to:"/",className:"nav-link",onClick:e.logout},"Log Out")))))}))}}]),t}(n.Component),at=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={authenticated:!!a.context.token},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement(tt,null),s.a.createElement("div",{className:"content-container"},this.state.authenticated&&s.a.createElement(c.d,null,s.a.createElement(c.b,{path:"/api/admin/change_password",component:et}),s.a.createElement(c.b,{path:"/api/admin/myTeachers",component:Ve}))))}}]),t}(n.Component);at.contextType=O;var nt=at,st=(a(262),a(263),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={token:localStorage.getItem("token")||"",userID:localStorage.getItem("userID")||"",username:localStorage.getItem("username")||"",tokenExpiration:localStorage.getItem("tokenExpiration")||"",accessType:localStorage.getItem("accessType")||"",exam_id:localStorage.getItem("exam_id")||""},a.login=function(e,t,n,s,r){a.setState({token:e,userID:t,username:n,accessType:s,tokenExpiration:r})},a.setExam=function(e){a.setState({exam_id:e})},a.logout=function(){localStorage.clear()},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.token,a=e.userID,n=e.username,r=e.accessType,o=e.tokenExpiration,l=e.exam_id,i=function(e){var a=e.component,n=Object(u.a)(e,["component"]);return s.a.createElement(c.b,Object.assign({},n,{render:function(e){return t&&2===Number(r)?s.a.createElement(a,e):s.a.createElement(c.a,{to:"/"})}}))};return s.a.createElement(O.Provider,{value:{token:t,userID:a,username:n,tokenExpiration:o,accessType:r,exam_id:l,setExam:this.setExam,login:this.login,logout:this.logout}},s.a.createElement(E.a,{autoClose:2e3}),s.a.createElement("div",{className:"App"},s.a.createElement(y,null),s.a.createElement(c.d,null,s.a.createElement((function(e){var a=e.component,n=Object(u.a)(e,["component"]);return s.a.createElement(c.b,Object.assign({},n,{render:function(e){return t&&1===Number(r)?s.a.createElement(a,e):s.a.createElement(c.a,{to:"/"})}}))}),{path:"/api/admin",component:nt}),s.a.createElement(i,{path:"/api/teacher",component:Qe}),s.a.createElement(i,{path:"/api/examRoom",component:W}),s.a.createElement((function(e){var a=e.component,n=Object(u.a)(e,["component"]);return s.a.createElement(c.b,Object.assign({},n,{render:function(e){return t&&3===Number(r)?s.a.createElement(a,e):s.a.createElement(c.a,{to:"/"})}}))}),{path:"/api/StudentExamRoom",component:ee}),s.a.createElement(c.b,{path:"/api/adminLogin",component:U}),s.a.createElement(c.b,{path:"/api/teacherLogin",component:Ke}),s.a.createElement(c.b,{path:"/",exact:!0,component:P}))))}}]),t}(n.Component)),rt=Object(c.g)(st);o.a.render(s.a.createElement(c.c,{history:i},s.a.createElement(rt,null)),document.getElementById("root"))},47:function(e,t,a){e.exports=a.p+"static/media/delete.6cf87964.svg"},48:function(e,t,a){e.exports=a.p+"static/media/edit.245511e4.svg"},50:function(e,t,a){e.exports=a.p+"static/media/print.4c4bacf7.svg"}},[[134,1,2]]]);
//# sourceMappingURL=main.2c427fa6.chunk.js.map